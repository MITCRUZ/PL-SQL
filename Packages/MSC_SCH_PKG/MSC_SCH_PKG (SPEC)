/* Formatted on 3/3/2020 7:33:24 AM (QP5 v5.256.13226.35510) */
CREATE OR REPLACE PACKAGE IMSI_CUSTOM.MSC_SCH_PKG
IS
   /*
        Sets the idx for the Task attribute (Primary Key)
   */
   idx   NUMBER := 0;

   /*
       Sends an email containing a text file
   */
   PROCEDURE send_to (P_ERR_BUF OUT VARCHAR2, P_MSG_BUFF OUT VARCHAR2);

   /*
        Allows the user to input an assignment into their to-do list (msc_tbl table) by
        inserting its priority,a brief description and the time they think it would take to finish said task
   */
   PROCEDURE insert_task (p_priority    msc_tbl.Priority%TYPE,
                          p_desc        msc_tbl.Description%TYPE,
                          p_time        msc_tbl.Approx_Time%TYPE);

   /*
        Allows the user to delete a certain task from their list.
  */
   PROCEDURE delete_task (p_target NUMBER);

   /*
        Searches for a specific task and sends it to someone via email
   */
   PROCEDURE search_for_task_send_to (p_task_num NUMBER, p_email VARCHAR2);

   /*
        Allows a user to set the status of a task from PENDING to COMPLETE
   */
   PROCEDURE completed_task (p_task_num NUMBER);

   /*
       Generates a UTL_FILE that contains details about the current days to-do list
   */
   PROCEDURE generate_file;

   /*
        Checks to see if the current record has a status of PENDING or not, if it does then it returns true
   */
   FUNCTION status_is_pending (p_task msc_tbl%ROWTYPE)
      RETURN BOOLEAN;

   /*
        Returns the number of tasks to complete for the day
   */
   FUNCTION total_tasks
      RETURN INT;

   /*
       Returns the number of tasks completed
   */
   FUNCTION tasks_completed
      RETURN INT;

   /*
        Generates and returns a unique 5 digit id number as a varchar2
   */
   FUNCTION unique_id_generator
      RETURN VARCHAR2;

   /*
        Replaces the long dbms_output stmt
   */
   PROCEDURE PRINT (text VARCHAR2);

   /*
         Adjusts the Task numbers after deleting a task from the list.
  */
   PROCEDURE adjust_task_numbers (p_tsk_num NUMBER);

   /*
        Returns the index of the last task in the to-do list
  */
   FUNCTION find_last_task_num
      RETURN NUMBER;

   /*
        Generates a txt file which contains detailed information about a specific task
   */
   PROCEDURE generate_specific_task;

   /*
        Returns the appropriate task given a task number
   */
   FUNCTION find_record (p_task_num NUMBER)
      RETURN msc_tbl%ROWTYPE;

   /*
        Resets the index of the Task atrribute to zero if all indexes have been removed
   */
   PROCEDURE reset_table_state;

   /*
        A copy of the msc_tbl but this table orders the tasks based on priority
   */
   PROCEDURE order_table_on_priority;

   /*
        Allows a user to delete a task from the ordered to-do list
   */
   PROCEDURE delete_task2 (p_target NUMBER);

   /*
        This procedure clears the data from the tables msc_tbl and msc_tbl_ordered at 11:59 pm
   */
   PROCEDURE reset_tables;

   /*
        Clears the msc_tbl table
   */
   PROCEDURE clear_todo_list;

   /*
        Clears the msc_tbl_ordered table
   */
   PROCEDURE clear_todo_list2;

   /*
        Sets all of the tasks status to PENDING
   */
   PROCEDURE set_all_to_pending;

   /*
        Sets all of the tasks status to COMPLETE
   */
   PROCEDURE set_all_to_complete;
END;
/
